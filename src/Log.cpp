/**
 *  File Name : Log.cpp
 *     Author : Josh Lubawy <jlubawy@gmail.com>
 *                          <jlubawy@asu.edu>
 */

#include "Log.h"

/******************************************************************************
                                Local Variables
******************************************************************************/
static FILE uartout = {0};


/******************************************************************************
                                Local Functions
******************************************************************************/
/*****************************************************************************/
static int uart_putchar(char c, FILE* stream)
{
    Serial.write(c);
    return 0 ;
}


/******************************************************************************
                                   Functions
******************************************************************************/
/*****************************************************************************/
void
Log_init()
{
    fdev_setup_stream(&uartout, uart_putchar, NULL, _FDEV_SETUP_WRITE);
    Serial.begin(115200, SERIAL_8N1);
    stdout = &uartout;
}


/*****************************************************************************/
void
Log_flush()
{
    Serial.flush();
}


/*****************************************************************************/
void Log_write(const char c)
{
    Serial.write(c);
}
